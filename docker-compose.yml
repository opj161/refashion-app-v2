# docker-compose.yml
services:
  app:
    build:
      context: .
      args:
        # Pass the host's user/group ID into the Dockerfile at build time.
        - PUID=${PUID}
        - PGID=${PGID}
    image: refashion-local
    container_name: refashion
    
    # --- THIS IS THE CRITICAL LINE FOR REBOOT PERSISTENCE ---
    restart: unless-stopped

    ports:
      - "3000:3000"
    volumes:
      - ./uploads:/app/uploads
      - ./user_data:/app/user_data
    # This loads all other environment variables for the application at runtime.
    env_file:
      - ./docker/.env